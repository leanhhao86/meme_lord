{% extends 'base/base.html' %}

{% block content %}

<h1>Post Detail</h1>

<img src="{{ post.meme.url }}" width="100" height="100"> <br>
<h2>{{ post.title }}</h2>
Description: {{ post.description }} <br>
Author: {{ post.author }} <br>
Cateogry: 
{% for cat in post.category.all %}
	{{ cat.name }} <br>
{% endfor %}

<!-- COMMENTS  -->
<h2>Leave your comment!</h2>
<div id="comments_section">

	<form method="POST">
		{% csrf_token %}
		<div class="form-group">
			{{ comment_form }}
			<button class="btn btn-info" type="submit">Add comment <i class="fas fa-comments"></i></button>
		</div>
	</form>

	{% if not user.is_authenticated %}
  <a class="btn btn-outline-info" href="{% url 'login' %}?next={{request.path}}">Log in to add a comment!</a><br>
  {% endif %}

  {% if comments %}
  <strong class="text-secondary">{{ object.number_of_comments }} Comment{{ object.number_of_comments|pluralize }}</strong>
  <hr>
  <ul>
    {% for comment in comments %}
    <li>           
     <div>
        <span>
          <strong class="text-info">{{ comment.author }} </strong>
          <small class="text-muted">{{ comment.date_posted }}</small>
        </span>
        <p>
          {{ comment.content|safe }}
        </p>
      </div>
    </li>
    {% endfor %}
  </ul>
  {% else %}
    <strong class="text-secondary">No comments yet...</strong>
  {% endif %}

</div>

{% endblock %}